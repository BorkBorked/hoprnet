(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4878:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9638)}])},9638:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ke}});var r=n(4229),a=n(3745),s=n(7939),i=n(111),c=n(9268),o=n(5001),u=n.n(o),p=n(4512),f=n(2735),l=n(2070),d=n.n(l),h=n(6582),v=n.n(h),g=n(8789),m=n.n(g);function x(e){return(0,p.jsx)("div",{className:m().logo,onClick:e.onClick,children:(0,p.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 196 196",xmlSpace:"preserve",children:[(0,p.jsx)("circle",{cx:"98",cy:"98",r:"98",fill:"#FFFFA0"}),(0,p.jsxs)("linearGradient",{id:"G",gradientUnits:"userSpaceOnUse",x1:"102",y1:"163.0232",x2:"102",y2:"57.4945",children:[(0,p.jsx)("stop",{offset:"0",style:{stopColor:"#0000B4"}}),(0,p.jsx)("stop",{offset:"9.090910e-03",style:{stopColor:"#0000B4"}}),(0,p.jsx)("stop",{offset:"1",style:{stopColor:"#000050"}})]}),(0,p.jsx)("path",{fill:"url(#G)",d:"M115.9,61.7c-1.1-0.1-2.2-0.2-3.3-0.2c-8.2,0-16.3,3.3-23.5,9.8c-3.4,3-6.5,6.6-9.4,10.8 c-0.5-15.6-1.4-32.2-2.9-49.1H55.6c4.5,47.7,4,89.3,3.2,125.8h0c0,0.1,0,0.1,0,0.2h21c0.6-36.6,9.8-60,23.3-72.1 c3.6-3.3,7.2-4.7,10.5-4.4c16.6,1.8,14,53.6,12.7,76.5h21c0.9-16.9,1.9-37.5-0.5-55.5C143.3,77.6,132.9,63.6,115.9,61.7z"})]})})}var b=n(7411),k=n(2804),w=n.n(k),y=d()((function(){return Promise.all([n.e(286),n.e(75)]).then(n.bind(n,6075))}),{loadableGenerated:{webpack:function(){return[6075]}},ssr:!1});function Z(e){var t=e.id,n=(0,f.useState)(!1),r=n[0],a=n[1];return r?(0,p.jsx)("span",{className:w().logId,children:t}):(0,p.jsx)("abbr",{className:w().logId,title:t,onClick:function(){return a(!0)},children:t.slice(48)})}var C=/(\b\w{53})\b/g;function S(e){var t=e.log,n=function(e,t){var n=e.msg.split(t),r=0;return n.map((function(n){return t.test(n)?[n,(0,p.jsx)(Z,{id:n},"".concat(e.id,"-").concat(++r))]:[n,void 0]}))}(t,C),r=n.filter((function(e){return!!(0,b.Z)(e,2)[1]})).map((function(e){return(0,b.Z)(e,1)[0]})),a=n.map((function(e){var t=(0,b.Z)(e,2),n=t[0];return t[1]||n}));return(0,p.jsxs)("div",{className:w().logline,children:[(0,p.jsx)("time",{children:new Date(t.ts).toISOString().slice(11)}),(0,p.jsx)("pre",{children:a}),(0,p.jsxs)("div",{className:w().loglineicons,children:[r.slice(0,1).map((function(e){return(0,p.jsx)(y,{diameter:15,address:e},e)})),"\xa0"]})]},t.id)}function j(e){var t=(0,f.useRef)(null);return(0,f.useEffect)((function(){t.current.scrollIntoView({block:"end",behaviour:"smooth"})})),(0,p.jsx)("div",{className:"".concat(w().logs," ").concat(e.isConnected?"":w().connecting),children:(0,p.jsxs)("div",{ref:t,children:[!e.isConnected&&(0,p.jsx)("span",{children:"Attempting to connect, please ensure correct settings are set!"}),e.messages.map((function(e){return(0,p.jsx)(S,{log:e},e.id)}))]})})}var A=n(7179),R=n.n(A),E=n(4872),N=n(876),O=n(4650),P=n(788),T=function(e){var t=I(e.map((function(e){return e[0]})))+2;return e.map((function(e){var n=(0,b.Z)(e,2),r=n[0],a=n[1];return r.padEnd(t)+a})).join("\n")},I=function(e){var t;return(t=Math).max.apply(t,(0,c.Z)(e.map((function(e){return e.length}))))},_=function(e,t){return{msg:e,id:String(Math.random()),ts:t||+new Date}},D=n(809),H=n(3714),U=n(6426),q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,E.Z)(this,e),this.uses=t,this.api=n,this.cache=r,this.hidden=a}var t=e.prototype;return t.usage=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,s=Object.values(this.uses)[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var i=(0,b.Z)(a.value,2),c=i[0],o=i[1],u=["- usage:"];if(c.length>0){var p=!0,f=!1,l=void 0;try{for(var d,h=c[Symbol.iterator]();!(p=(d=h.next()).done);p=!0){var v=(0,b.Z)(d.value,2),g=v[0],m=v[1],x=(0,b.Z)(L[g],2),k=x[0],w=x[1],y=m||k,Z=w;u.push("<".concat(y," (").concat(Z,")>"))}}catch(C){f=!0,l=C}finally{try{p||null==h.return||h.return()}finally{if(f)throw l}}}else u.push("<none>");e.push([u.join(" "),o])}}catch(C){n=!0,r=C}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return T(e)},t.noQuery=function(){return"No query provided.\n".concat(this.usage())},t.invalidQuery=function(e){return'Invalid query, received "'.concat(e,'".\n').concat(this.usage())},t.invalidParameter=function(e,t,n){return'Invalid parameter "'.concat(e,'" of type "').concat(t,'"').concat(n?' with error "'+n+'"':"",'".\n').concat(this.usage())},t.failedCommand=function(e,t){return"Failed to ".concat(e).concat(t?' with error "'+t+'"':"",".")},t.failedApiCall=function(e,t,n){var a=this;return(0,r.Z)(u().mark((function r(){var s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(s=n[e.status])){r.next=17;break}if(r.t0=a,r.t1=t,"string"!==typeof s){r.next=8;break}r.t2=s,r.next=13;break;case 8:return r.t3=s,r.next=11,e.json();case 11:r.t4=r.sent,r.t2=(0,r.t3)(r.t4);case 13:return r.t5=r.t2,r.abrupt("return",r.t0.failedCommand.call(r.t0,r.t1,r.t5));case 17:if(403!==e.status){r.next=21;break}return r.abrupt("return",a.failedCommand(t,"Unauthorized. Please confirm apiToken is set"));case 21:return r.abrupt("return",a.failedCommand(t,"unknown error code '".concat(e.status,"'")));case 22:case"end":return r.stop()}}),r)})))()},t.assertUsage=function(e){var t,n=this.cache.getCachedAliases(),r=!0,a=!1,s=void 0;try{for(var i,o=this,u=function(r,a){var s=(0,b.Z)(a.value,2),i=s[0],u=(0,b.Z)(s[1],1)[0];if(t=void 0,!e&&u.length>0)return t=[o.noQuery(),i],"continue";var p=e.length>0?e.split(" "):[],f=u.findIndex((function(e){return"arbitrary"===e[0]}));if(f>-1){var l=p.slice(f).join(" ");p=p.slice(0,f),l.length>0&&p.push(l)}if(p.length!==u.length)return t=[o.invalidQuery(e),i],"continue";for(var d=[],h=0;h<u.length;h++){var v=(0,b.Z)(u[h],2),g=v[0],m=v[1],x=(0,b.Z)(L[g],3)[2],k=p[h],w=(0,b.Z)(x(k,{aliases:n,customName:m}),2),y=w[0],Z=w[1];y?d.push(Z):t=[o.invalidParameter(k,g),i]}return t?void 0:{v:[void 0,i].concat((0,c.Z)(d))}},p=Object.entries(this.uses)[Symbol.iterator]();!(r=(i=p.next()).done);r=!0){var f=u(0,i);if("object"===(0,D.Z)(f))return f.v}}catch(l){a=!0,s=l}finally{try{r||null==p.return||p.return()}finally{if(a)throw s}}return t},e}(),L={hoprAddress:["HOPR address","'16Ui..'",function(e){try{return[!0,(0,H.jE)(e)]}catch(t){return[!1,e]}}],nativeAddress:["NATIVE address","'0x..",function(e){return[U.UJ(e),e]}],hoprAddressOrAlias:["HOPR address or alias","'16Ui..' or 'alice'",function(e,t){var n,r=t.aliases;try{n=(0,H.jE)(e)}catch(s){}if(!n&&r){var a=r[e];try{n=(0,H.jE)(a)}catch(i){}}return n?[!0,n]:[!1]}],hoprOrNative:["currency","'hopr' or 'native'",function(e){if("string"!==typeof e)return[!1,e];var t=e.toLowerCase();return["hopr"===t||"native"===t,t]}],direction:["direction","'incoming' or 'outgoing'",function(e){if("string"!==typeof e)return[!1,e];var t=e.toLowerCase();return["incoming"===t||"outgoing"===t,t]}],constant:["constant","A constant value",function(e,t){var n=t.customName;return n?[e===n,e]:[!1,e]}],number:["number","Any number",function(e){return[!isNaN(e)&&isFinite(e),e]}],string:["string","Any string with no spaces",function(e){return["string"===typeof e,e]}],arbitrary:["arbitrary","An arbitrary string",function(e){return["string"===typeof e,e]}],boolean:["boolean","Any boolean, 'true' or 'false'",function(e){return["true"===e||"false"===e,"true"===e]}]},M=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[],"show aliases"],setAlias:[[["hoprAddress"],["string","name"]],"set alias"],removeAlias:[[["constant","remove"],["string","name"]],"remove alias"]},e,r)}var c=n.prototype;return c.name=function(){return"alias"},c.description=function(){return"View, set, or remove aliases"},c.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var c,o,p,f,l,d,h,v,g;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=(0,b.Z)(n.assertUsage(t),4),o=c[0],p=c[1],f=c[2],l=c[3],!o){r.next=3;break}return r.abrupt("return",e(o));case 3:if(d=n.cache.getCachedAliases(),"default"!==p){r.next=11;break}if(0!==(h=Object.entries(d)).length){r.next=8;break}return r.abrupt("return",e("No aliases found.\n".concat(n.usage())));case 8:return r.abrupt("return",e(T(h.map((function(e){var t=(0,b.Z)(e,2),n=t[0],r=t[1];return[n,"-> ".concat(r)]})))));case 11:if("setAlias"!==p){r.next=27;break}return r.next=14,n.api.setAlias(f.toString(),l);case 14:if(201!=(v=r.sent).status){r.next=20;break}return n.cache.updateAliasCache((function(e){return(0,i.Z)((0,s.Z)({},e),(0,a.Z)({},l,f.toString()))})),r.abrupt("return",e("Alias '".concat(l,"' was set to '").concat(f.toString(),"'.")));case 20:return r.t0=e,r.next=23,n.failedApiCall(v,"set alias '".concat(l,"'"),{400:"invalid peer ID ".concat(f.toString()),422:function(e){return e.error}});case 23:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 25:r.next=40;break;case 27:return r.next=29,n.api.removeAlias(l);case 29:if(204!=(g=r.sent).status){r.next=35;break}return n.cache.updateAliasCache((function(e){return delete e[l],e})),r.abrupt("return",e("Alias '".concat(l,"' was removed.")));case 35:return r.t2=e,r.next=38,n.failedApiCall(g,"remove alias '".concat(l,"'"),{422:""});case 38:return r.t3=r.sent,r.abrupt("return",(0,r.t2)(r.t3));case 40:case"end":return r.stop()}}),r)})))()},n}(q),F=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[],"shows all addresses"],onlyOne:[[["hoprOrNative"]],"shows one address"]},e,r)}var a=n.prototype;return a.name=function(){return"address"},a.description=function(){return"Displays the native and HOPR addresses of this node, optionally view one address."},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p,f,l,d,h,v;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),3),s=a[0],i=a[1],c=a[2],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return r.next=5,n.api.getAddresses();case 5:if((o=r.sent).ok){r.next=12;break}return r.t0=e,r.next=10,n.failedApiCall(o,"fetch addresses",{422:function(e){return e.error}});case 10:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 12:return r.next=14,o.json();case 14:if(p=r.sent,f=n.cache.getSymbols(),l="".concat(f.hoprDisplay," Address:"),d=p.hopr,h="".concat(f.nativeDisplay," Address:"),v=p.native,"onlyOne"!==i){r.next=29;break}if("hopr"!==c){r.next=25;break}return r.abrupt("return",e(d));case 25:if("native"!==c){r.next=27;break}return r.abrupt("return",e(v));case 27:r.next=30;break;case 29:return r.abrupt("return",e(T([[l,d],[h,v]])));case 30:case"end":return r.stop()}}),r)})))()},n}(q),W=n(2270),V=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[],"shows all balances"],onlyOne:[[["hoprOrNative"]],"shows shows one balance"]},e,r)}var a=n.prototype;return a.name=function(){return"balance"},a.description=function(){return"Displays your current HOPR and native balance"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p,f,l,d,h,v;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),3),s=a[0],i=a[1],c=a[2],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return r.next=5,n.api.getBalances();case 5:if((o=r.sent).ok){r.next=12;break}return r.t0=e,r.next=10,n.failedApiCall(o,"fetch balances",{422:function(e){return e.error}});case 10:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 12:return p=n.cache.getSymbols(),r.next=15,o.json();case 15:if(f=r.sent,l="".concat(p.hoprDisplay," Balance:"),d=W.dF(f.hopr),h="".concat(p.nativeDisplay," Balance:"),v=W.dF(f.native),"onlyOne"!==i){r.next=28;break}if("hopr"!==c){r.next=25;break}return r.abrupt("return",e(d));case 25:return r.abrupt("return",e(v));case 26:r.next=29;break;case 28:return r.abrupt("return",e(T([[l,d],[h,v]])));case 29:case"end":return r.stop()}}),r)})))()},n}(q),B=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[["string","message"]],"Signs a message"]},e,r)}var a=n.prototype;return a.name=function(){return"sign"},a.description=function(){return'Signs a message with a node\u2019s key and the prefix "HOPR Signed Message: "'},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),3),s=a[0],i=a[2],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return r.next=5,n.api.signMessage(i);case 5:if((c=r.sent).ok){r.next=10;break}return r.abrupt("return",e(n.failedCommand("sign message")));case 10:return r.t0=e,r.t1="Signed message: ",r.next=14,c.json();case 14:return r.t2=r.sent.signature,r.t3=r.t1.concat.call(r.t1,r.t2),r.abrupt("return",(0,r.t0)(r.t3));case 17:case"end":return r.stop()}}),r)})))()},n}(q),Q=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{},e,r)}var a=n.prototype;return a.name=function(){return"peers"},a.description=function(){return"Lists connected and interesting HOPR nodes"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function t(){var r,a,s,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.api.getPeers();case 2:if((r=t.sent).ok){t.next=5;break}return t.abrupt("return",e(n.failedCommand("get peers")));case 5:return t.next=7,r.json();case 7:if(a=t.sent,s=a.announced.map((function(e){return[e.peerId,String(e.quality)]})),i=a.connected.map((function(e){return[e.peerId,String(e.quality)]})),0!==s.length||0!==i.length){t.next=14;break}return t.abrupt("return",e("No peers found."));case 14:return t.abrupt("return",e(T(i)));case 15:case"end":return t.stop()}}),t)})))()},n}(q),G=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[["hoprAddressOrAlias"]],""]},e,r)}var a=n.prototype;return a.name=function(){return"ping"},a.description=function(){return"Pings another node to check its availability"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),3),s=a[0],i=a[2],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return c=i.toString(),r.next=6,n.api.ping(c);case 6:if((o=r.sent).ok){r.next=13;break}return r.t0=e,r.next=11,n.failedApiCall(o,"ping node",{400:"invalid peer ID ".concat(c),422:""});case 11:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 13:return r.next=15,o.json();case 15:if(!((p=r.sent).latency>=0)){r.next=20;break}return r.abrupt("return",e("Pong received in ".concat(p.latency," ms")));case 20:return r.abrupt("return",e(n.failedCommand("ping node","timeout")));case 21:case"end":return r.stop()}}),r)})))()},n}(q),J=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[],"shows open channels"],incoming:[[["direction"]],"show incoming channels"],outgoing:[[["direction"]],"show outgoing channels"]},e,r)}var a=n.prototype;return a.name=function(){return"channels"},a.description=function(){return"Lists your currently open channels, optionally show all channels"},a.getChannelLog=function(e,t){return T([[e+" Channel:",t.channelId],["To:",t.peerId],["Status:",t.status],["Balance:","".concat(W.dF(t.balance)," ").concat(this.cache.getSymbols().hopr)]])},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p,f,l,d,h,v,g,m,x,k,w,y,Z,C,S,j,A;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),3),s=a[0],i=a[2],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return c=!0===i,o="incoming"===i,p="outgoing"===i,e("fetching channels..."),r.next=9,n.api.getChannels();case 9:if((f=r.sent).ok){r.next=16;break}return r.t0=e,r.next=14,n.failedApiCall(f,"fetch channels",{422:function(e){return e.error}});case 14:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 16:return r.next=18,f.json();case 18:if(l=r.sent,p){r.next=42;break}if(d=l.incoming.filter((function(e){return!!c||"Closed"!==e.status})),0!=d.length){r.next=25;break}e("\nNo channels opened to you."),r.next=42;break;case 25:for(h=!0,v=!1,g=void 0,r.prev=26,m=d[Symbol.iterator]();!(h=(x=m.next()).done);h=!0)k=x.value,e(n.getChannelLog("Incoming",k));r.next=34;break;case 30:r.prev=30,r.t2=r.catch(26),v=!0,g=r.t2;case 34:r.prev=34,r.prev=35,h||null==m.return||m.return();case 37:if(r.prev=37,!v){r.next=40;break}throw g;case 40:return r.finish(37);case 41:return r.finish(34);case 42:if(o){r.next=65;break}if(w=l.outgoing.filter((function(e){return!!c||"Closed"!==e.status})),0!=w.length){r.next=48;break}e("\nNo channels opened by you."),r.next=65;break;case 48:for(y=!0,Z=!1,C=void 0,r.prev=49,S=w[Symbol.iterator]();!(y=(j=S.next()).done);y=!0)A=j.value,e(n.getChannelLog("Outgoing",A));r.next=57;break;case 53:r.prev=53,r.t3=r.catch(49),Z=!0,C=r.t3;case 57:r.prev=57,r.prev=58,y||null==S.return||S.return();case 60:if(r.prev=60,!Z){r.next=63;break}throw C;case 63:return r.finish(60);case 64:return r.finish(57);case 65:case"end":return r.stop()}}),r,null,[[26,30,34,42],[35,,37,41],[49,53,57,65],[58,,60,64]])})))()},n}(q),X=n(2693),z=n.n(X),K=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[["hoprAddressOrAlias"],["number","Amount of HOPR tokens"]],"opens channel"]},e,r)}var a=n.prototype;return a.name=function(){return"open"},a.description=function(){return"Opens a payment channel between you and the counterparty provided"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p,f,l,d,h;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),4),s=a[0],i=a[2],c=a[3],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return o=new(z())(String(W.fi(String(c)))),p=i.toString(),r.next=7,n.api.getBalances();case 7:if((f=r.sent).ok){r.next=14;break}return r.t0=e,r.next=12,n.failedApiCall(f,"fetch balances so we can open channel ".concat(p),{422:function(e){return e.error}});case 12:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 14:return r.next=16,f.json().then((function(e){return new(z())(e.hopr)}));case 16:if(l=r.sent,!o.lten(0)){r.next=21;break}return r.abrupt("return",e("Invalid 'amount' provided: ".concat(o.toString(10))));case 21:if(!o.gt(l)){r.next=23;break}return r.abrupt("return",e("You don't have enough tokens: ".concat(o.toString(10),"<").concat(l.toString(10))));case 23:return e('Opening channel to node "'.concat(p,'"..')),r.next=26,n.api.openChannel(p,o.toString());case 26:if((d=r.sent).ok){r.next=33;break}return r.t2=e,r.next=31,n.failedApiCall(d,"open a channel to ".concat(p),{400:function(e){return"one or more invalid inputs ".concat(e.status)},403:"not enough balance",409:"channel already exists",422:function(e){return e.error}});case 31:return r.t3=r.sent,r.abrupt("return",(0,r.t2)(r.t3));case 33:return r.next=35,d.json().then((function(e){return e.channelId}));case 35:return h=r.sent,r.abrupt("return",e('Successfully opened channel "'.concat(h,'" to node "').concat(p,'".')));case 37:case"end":return r.stop()}}),r)})))()},n}(q),Y=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[["hoprAddressOrAlias"],["direction"]],"closes channel"]},e,r)}var a=n.prototype;return a.name=function(){return"close"},a.description=function(){return"Close an an outgoing channel"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p,f,l,d,h;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),4),s=a[0],i=a[2],c=a[3],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return e('Closing channel to "'.concat(i,'"..')),o="?",r.t0=b.Z,r.next=8,Promise.all([n.api.closeChannel(i.toString(),c),n.api.getInfo()]);case 8:if(r.t1=r.sent,p=(0,r.t0)(r.t1,2),f=p[0],l=p[1],f.ok){r.next=18;break}return r.t2=e,r.next=16,n.failedApiCall(f,"close channel with '".concat(i.toString(),"'"),{400:"invalid peer ID ".concat(i.toString()),422:function(e){return e.error}});case 16:return r.t3=r.sent,r.abrupt("return",(0,r.t2)(r.t3));case 18:if(l.ok){r.next=24;break}return r.t4=e,r.next=22,n.failedApiCall(l,"close channel with '".concat(i.toString(),"' when fetching node information"),{422:function(e){return e.error}});case 22:return r.t5=r.sent,r.abrupt("return",(0,r.t4)(r.t5));case 24:if(!l.ok){r.next=28;break}return r.next=27,l.json();case 27:o=r.sent.channelClosurePeriod;case 28:return r.next=30,f.json();case 30:if(d=r.sent,h=d.receipt,"Open"!==d.channelStatus){r.next=37;break}return r.abrupt("return",e("Initiated channel closure, the channel must remain open for at least ".concat(o,' minutes. Please send the close command again once the cool-off has passed. Receipt: "').concat(h,'".')));case 37:return r.abrupt("return",e("Closing channel. Receipt: ".concat(h)));case 38:case"end":return r.stop()}}),r)})))()},n}(q),$=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[["hoprAddressOrAlias"],["arbitrary","message"]],"send a message, path is chosen automatically"],manual:[[["string","path seperated by ','"],["arbitrary","message"]],"send a message, path is manually specified"]},e,r)}var a=n.prototype;return a.name=function(){return"send"},a.description=function(){return"Sends a message to another party"},a.parsePathStr=function(e){var t=e.split(",").filter(Boolean),n=L.hoprAddressOrAlias[2],r=this.cache.getCachedAliases(),a=[],s=!0,i=!1,c=void 0;try{for(var o,u=t[Symbol.iterator]();!(s=(o=u.next()).done);s=!0){var p=o.value;try{var f=(0,b.Z)(n(p,{aliases:r}),2),l=f[0],d=f[1];if(!l)throw Error();a.push(d.toString())}catch(v){return[!1,"'".concat(p,"' is not an alias or HOPR address"),void 0]}}}catch(g){i=!0,c=g}finally{try{s||null==u.return||u.return()}finally{if(i)throw c}}var h=[a.slice(0,a.length-1),a[a.length-1]];return[!0,void 0,{intermediateNodes:h[0],recipient:h[1]}]},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,o,p,f,l,d,h,v,g,m,x,k,w,y,Z,C,S,j,A,R;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),4),s=a[0],i=a[1],o=a[2],p=a[3],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:if(l=o,"manual"!==i){r.next=11;break}if(d=(0,b.Z)(n.parsePathStr(o),3),h=d[0],v=d[1],g=d[2],h){r.next=9;break}return r.abrupt("return",e(n.invalidParameter(o,"path",v)));case 9:f=g.intermediateNodes,l=g.recipient;case 11:return r.t0=b.Z,r.next=14,Promise.all([n.api.getSettings(),n.api.getAddresses()]);case 14:if(r.t1=r.sent,m=(0,r.t0)(r.t1,2),x=m[0],k=m[1],x.ok){r.next=24;break}return r.t2=e,r.next=22,n.failedApiCall(x,"send message to ".concat(l," when fetching latest settings"),{422:function(e){return e.error}});case 22:return r.t3=r.sent,r.abrupt("return",(0,r.t2)(r.t3));case 24:if(k.ok){r.next=30;break}return r.t4=e,r.next=28,n.failedApiCall(k,"send message to ".concat(l," when fetching addresses"),{422:function(e){return e.error}});case 28:return r.t5=r.sent,r.abrupt("return",(0,r.t4)(r.t5));case 30:return r.next=32,x.json();case 32:return w=r.sent,r.next=35,k.json();case 35:if(y=r.sent,!f||0!==f.length){r.next=40;break}e("Sending direct message to ".concat(l," ..")),r.next=55;break;case 40:if(!(f&&f.length>0)){r.next=54;break}Z=[y.hopr].concat((0,c.Z)(f),[l]),C=0;case 43:if(!(C<Z.length-1)){r.next=51;break}if(S=Z[C],j=Z[C+1],S!==j){r.next=48;break}return r.abrupt("return",e(n.failedCommand("construct path","cannot have the same adjacent nodes")));case 48:++C,r.next=43;break;case 51:e("Sending message to ".concat(l," via ").concat(f.join("->")," ..")),r.next=55;break;case 54:e("Sending message to ".concat(l," using automatic path finding .."));case 55:return A=w.includeRecipient?"".concat(y.hopr,":").concat(p):p,r.next=58,n.api.sendMessage(A,l,f);case 58:if((R=r.sent).ok){r.next=67;break}return r.t6=e,r.next=63,n.failedApiCall(R,"send message to ".concat(l),{422:function(e){return e.error}});case 63:return r.t7=r.sent,r.abrupt("return",(0,r.t6)(r.t7));case 67:return r.t8=e,r.t9="Message to ".concat(l," sent (ack challenge "),r.next=71,R.text();case 71:return r.t10=r.sent,r.t11=r.t9.concat.call(r.t9,r.t10,")"),r.abrupt("return",(0,r.t8)(r.t11));case 74:case"end":return r.stop()}}),r)})))()},n}(q),ee=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[],"shows all tickets"]},e,r)}var a=n.prototype;return a.name=function(){return"tickets"},a.description=function(){return"Displays information about your redeemed and unredeemed tickets"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function t(){var r,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.api.getTicketStats();case 2:if((r=t.sent).ok){t.next=7;break}return t.abrupt("return",e(n.failedCommand("get ticket statistics")));case 7:return t.next=9,r.json();case 9:return a=t.sent,s=n.cache.getSymbols(),t.abrupt("return",e(T([["Tickets:",""],["- Pending:",a.pending],["- Unredeemed:",a.unredeemed],["- Unredeemed Value:","".concat(W.dF(a.unredeemedValue)," ").concat(s.hopr)],["- Redeemed:",a.redeemed],["- Redeemed Value:","".concat(W.dF(a.redeemedValue)," ").concat(s.hopr)],["- Losing Tickets:",a.losingTickets],["- Win Proportion:",100*a.winProportion],["- Neglected:",a.neglected],["- Rejected:",a.rejected],["- Rejected Value:","".concat(W.dF(a.rejectedValue)," ").concat(s.hopr)]])));case 12:case"end":return t.stop()}}),t)})))()},n}(q),te=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[],"redeem all tickets"]},e,r)}var a=n.prototype;return a.name=function(){return"redeemTickets"},a.description=function(){return"Redeems all your tickets"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e("Redeeming all tickets..."),t.next=3,n.api.redeemTickets();case 3:if(t.sent.ok){t.next=6;break}return t.abrupt("return",e(n.failedCommand("redeem tickets")));case 6:e("Redeemed all tickets. Run 'tickets' for details");case 7:case"end":return t.stop()}}),t)})))()},n}(q),ne=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[["number","amount"],["hoprOrNative"],["nativeAddress"]],"withdraw 'hopr' or 'native' tokens"]},e,r)}var a=n.prototype;return a.name=function(){return"withdraw"},a.description=function(){return"Withdraw hopr or native tokens to a given native address"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p,f,l;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),5),s=a[0],i=a[2],c=a[3],o=a[4],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return p=W.fi(String(i)),e("Withdrawing ".concat(i," ").concat(c,' to "').concat(o,'"..')),r.next=7,n.api.withdraw(p.toString(),c,o);case 7:if((f=r.sent).ok){r.next=14;break}return r.t0=e,r.next=12,n.failedApiCall(f,"withdraw ".concat(i," ").concat(c),{400:function(e){return"one or more invalid inputs ".concat(e.status)},422:function(e){return e.status}});case 12:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 14:return r.next=16,f.json().then((function(e){return e.receipt}));case 16:return l=r.sent,r.abrupt("return",e("Withdrawed ".concat(i," ").concat(c,' to "').concat(o,'", receipt ').concat(l,".")));case 18:case"end":return r.stop()}}),r)})))()},n}(q),re=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{view:[[],"show all settings"],update:[[["string","key"],["string","value"]],"update a setting"]},e,r)}var a=n.prototype;return a.name=function(){return"settings"},a.description=function(){return"list your current settings or update them"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),4),s=a[0],i=a[1],c=a[2],o=a[3],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:if("view"!==i){r.next=20;break}return r.next=6,n.api.getSettings();case 6:if((p=r.sent).ok){r.next=9;break}return r.abrupt("return",e(n.failedCommand("get settings")));case 9:return r.t0=e,r.t1=T,r.t2=Object,r.next=14,p.json();case 14:return r.t3=r.sent,r.t4=r.t2.entries.call(r.t2,r.t3).map((function(e){var t=(0,b.Z)(e,2),n=t[0],r=t[1];return[n,String(r)]})),r.t5=(0,r.t1)(r.t4),r.abrupt("return",(0,r.t0)(r.t5));case 20:return r.next=22,n.api.setSetting(c,"includeRecipient"===c?"true"===o:o);case 22:if(r.sent.ok){r.next=25;break}return r.abrupt("return",e(n.failedCommand('set setting "'.concat(c,'" to "').concat(o,'"'))));case 25:return r.abrupt("return",e("Settings updated."));case 26:case"end":return r.stop()}}),r)})))()},n}(q),ae=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[["hoprAddressOrAlias"]],"gets information about peer"]},e,r,!0)}var a=n.prototype;return a.name=function(){return"peerinfo"},a.description=function(){return"*For devs* Get information of a peer"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,o,p,f,l,d;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),3),s=a[0],i=a[2],!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return o=i.toString(),r.next=6,n.api.getPeerInfo(o);case 6:if((p=r.sent).ok){r.next=9;break}return r.abrupt("return",e(n.failedCommand("get peer's information")));case 9:return r.next=11,p.json();case 11:return f=r.sent,l=f.announced,d=f.observed,r.abrupt("return",e(["Announced addresses for ".concat(o,":")].concat((0,c.Z)(l),["Observed addresses for ".concat(o,":")],(0,c.Z)(d)).join("\n")));case 15:case"end":return r.stop()}}),r)})))()},n}(q),se=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{default:[[],"displays node information"]},e,r)}var a=n.prototype;return a.name=function(){return"info"},a.description=function(){return"Information about the HOPR Node, including any options it started with"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function t(){var r,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.api.getInfo();case 2:if((r=t.sent).ok){t.next=9;break}return t.t0=e,t.next=7,n.failedApiCall(r,"fetch node information",{422:function(e){return e.error}});case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:return t.next=11,r.json();case 11:return a=t.sent,t.abrupt("return",e(T([["Announcing to other nodes as",a.announcedAddress.join("  ")],["Listening on",a.listeningAddress.join("  ")],["Running on",a.network],["Using HOPR environment",a.environment],["Channel closure period","".concat(a.channelClosurePeriod," minutes")],["HOPR Token Contract Address",a.hoprToken],["HOPR Channels Contract Addresss",a.hoprChannels],["HOPR NetworkRegistry Contract Address",a.hoprNetworkRegistry],["NetworkRegistry Eligibility",a.isEligible],["Connectivity Status",a.connectivityStatus]])));case 13:case"end":return t.stop()}}),t)})))()},n}(q),ie=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{},e,r)}var a=n.prototype;return a.name=function(){return"version"},a.description=function(){return"Displays the version the HOPRd node is running."},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function t(){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.api.getVersion();case 2:if((r=t.sent).ok){t.next=5;break}return t.abrupt("return",e(n.failedCommand("get version")));case 5:return t.t0=e,t.next=8,r.text();case 8:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 10:case"end":return t.stop()}}),t)})))()},n}(q),ce=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r,a){var s;return(0,E.Z)(this,n),(s=t.call(this,{default:[[],"displays help"],showAll:[[["constant","all"]],"shows hidden commands"]},e,r)).commands=a,s}var a=n.prototype;return a.name=function(){return"help"},a.description=function(){return"Displays all the command options."},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(0,b.Z)(n.assertUsage(t),3),s=a[0],i=a[2],c=void 0!==i&&i,!s){r.next=3;break}return r.abrupt("return",e(s));case 3:return o="all"===c,p=n.commands.filter((function(e){return!!o||!e.hidden})).map((function(e){return[e.name(),e.description()]})).sort((function(e,t){return e[0].localeCompare(t[0],"en")})),o||p.push(["","* Display hidden commands by running 'help all'"]),r.abrupt("return",e(T(p)));case 7:case"end":return r.stop()}}),r)})))()},n}(q),oe="Eligible",ue="".concat("Id".padEnd(5," "),"  ").concat(oe,"  ").concat("Multiaddrs"),pe=function(e){(0,O.Z)(n,e);var t=(0,P.Z)(n);function n(e,r){return(0,E.Z)(this,n),t.call(this,{},e,r,!0)}var a=n.prototype;return a.name=function(){return"entryNodes"},a.description=function(){return"Lists announced entry nodes and their eligibility status"},a.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function t(){var r,a,s,i,c,o,p,f,l,d,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.api.getEntryNodes();case 2:if((r=t.sent).ok){t.next=5;break}return t.abrupt("return",e(n.failedCommand("get entryNodes")));case 5:return t.next=7,r.json();case 7:for(a=t.sent,s="".concat(ue,"\n"),i=!0,c=!1,o=void 0,t.prev=10,p=Object.entries(a)[Symbol.iterator]();!(i=(f=p.next()).done);i=!0)l=(0,b.Z)(f.value,2),d=l[0],h=l[1],s.length>ue.length+1&&(s+="\n"),s+="".concat(d,"  "),s+="".concat(String(h.isEligible).padEnd(oe.length),"  "),s+=h.multiaddrs.join(",");t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),c=!0,o=t.t0;case 18:t.prev=18,t.prev=19,i||null==p.return||p.return();case 21:if(t.prev=21,!c){t.next=24;break}throw o;case 24:return t.finish(21);case 25:return t.finish(18);case 26:if(s.length!==ue.length+1){t.next=30;break}return t.abrupt("return",e("No entry nodes known."));case 30:return t.abrupt("return",e(s));case 31:case"end":return t.stop()}}),t,null,[[10,14,18,26],[19,,21,25]])})))()},n}(q),fe=function(){function e(t,n){(0,E.Z)(this,e),this.api=t,this.cache=n,this.commandMap=new Map;var r=[new M(this.api,this.cache),new F(this.api,this.cache),new V(this.api,this.cache),new B(this.api,this.cache),new Q(this.api,this.cache),new pe(this.api,this.cache),new G(this.api,this.cache),new J(this.api,this.cache),new K(this.api,this.cache),new Y(this.api,this.cache),new $(this.api,this.cache),new ee(this.api,this.cache),new te(this.api,this.cache),new ne(this.api,this.cache),new re(this.api,this.cache),new ae(this.api,this.cache),new se(this.api,this.cache),new ie(this.api,this.cache)];r.push(new ce(this.api,this.cache,r));var a=!0,s=!1,i=void 0;try{for(var c,o=r[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var u=c.value;if(this.commandMap.has(u.name()))throw new Error("Duplicate commands for ".concat(u));this.commandMap.set(u.name(),u)}}catch(p){s=!0,i=p}finally{try{a||null==o.return||o.return()}finally{if(s)throw i}}}var t=e.prototype;return t.allCommands=function(){return Array.from(this.commandMap.keys())},t.execute=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){var a,s,i,c,o,p;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t.trim().split(" "),s=(0,N.Z)(a),i=s[0],c=s.slice(1),o=c.join(" "),i){r.next=5;break}return r.abrupt("return",e("Command not provided!"));case 5:if(e("> "+t),!(p=n.commandMap.get(i))){r.next=20;break}if("help"!==o){r.next=10;break}return r.abrupt("return",e(p.usage()));case 10:return r.prev=10,r.next=13,p.execute(e,o);case 13:return r.abrupt("return",r.sent);case 16:return r.prev=16,r.t0=r.catch(10),console.error(r.t0),r.abrupt("return",e("".concat(i,": Unexpected error executing command.\n").concat(p.usage())));case 20:return r.abrupt("return",e("".concat(i,": Unknown command!")));case 21:case"end":return r.stop()}}),r,null,[[10,16]])})))()},e}(),le=n(9082),de=function(){function e(t,n){(0,E.Z)(this,e),this.apiEndpoint=t,this.apiToken=n}var t=e.prototype;return t.getEndpoint=function(e){return new URL(e,this.apiEndpoint).href},t.getHeaders=function(){var e=new Headers;return e.set("Content-Type","application/json"),e.set("Accept-Content","application/json"),this.apiToken&&e.set("Authorization","Basic "+btoa(this.apiToken)),e},t.getReq=function(e){var t=this;return(0,r.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(t.getEndpoint(e),{headers:t.getHeaders()}));case 1:case"end":return n.stop()}}),n)})))()},t.postReq=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",fetch(n.getEndpoint(e),{method:"POST",headers:n.getHeaders(),body:JSON.stringify(t)}));case 1:case"end":return r.stop()}}),r)})))()},t.putReq=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",fetch(n.getEndpoint(e),{method:"PUT",headers:n.getHeaders(),body:JSON.stringify(t)}));case 1:case"end":return r.stop()}}),r)})))()},t.delReq=function(e){var t=this;return(0,r.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(t.getEndpoint(e),{method:"DELETE",headers:t.getHeaders()}));case 1:case"end":return n.stop()}}),n)})))()},t.withdraw=function(e,t,n){var a=this;return(0,r.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",a.postReq("/api/v2/account/withdraw",{amount:e,currency:t.toUpperCase(),recipient:n}));case 1:case"end":return r.stop()}}),r)})))()},t.getBalances=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/account/balances"));case 1:case"end":return t.stop()}}),t)})))()},t.getAddresses=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/account/addresses"));case 1:case"end":return t.stop()}}),t)})))()},t.getAliases=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/aliases"));case 1:case"end":return t.stop()}}),t)})))()},t.setAlias=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n.postReq("/api/v2/aliases",{peerId:e,alias:t}));case 1:case"end":return r.stop()}}),r)})))()},t.removeAlias=function(e){var t=this;return(0,r.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.delReq("/api/v2/aliases/".concat(e)));case 1:case"end":return n.stop()}}),n)})))()},t.getChannels=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/channels"));case 1:case"end":return t.stop()}}),t)})))()},t.closeChannel=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n.delReq("/api/v2/channels/".concat(e,"/").concat(t)));case 1:case"end":return r.stop()}}),r)})))()},t.openChannel=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n.postReq("/api/v2/channels",{peerId:e,amount:t}));case 1:case"end":return r.stop()}}),r)})))()},t.redeemTickets=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.postReq("/api/v2/tickets/redeem",{}));case 1:case"end":return t.stop()}}),t)})))()},t.getTickets=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/tickets"));case 1:case"end":return t.stop()}}),t)})))()},t.getTicketStats=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/tickets/statistics"));case 1:case"end":return t.stop()}}),t)})))()},t.signMessage=function(e){var t=this;return(0,r.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.postReq("/api/v2/messages/sign",{message:e}));case 1:case"end":return n.stop()}}),n)})))()},t.sendMessage=function(e,t,n){var a=this;return(0,r.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",a.postReq("/api/v2/messages",{body:e,recipient:t,path:n}));case 1:case"end":return r.stop()}}),r)})))()},t.getInfo=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/node/info"));case 1:case"end":return t.stop()}}),t)})))()},t.getVersion=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/node/version"));case 1:case"end":return t.stop()}}),t)})))()},t.ping=function(e){var t=this;return(0,r.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.postReq("/api/v2/node/ping",{peerId:e}));case 1:case"end":return n.stop()}}),n)})))()},t.getPeers=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/node/peers"));case 1:case"end":return t.stop()}}),t)})))()},t.getPeerInfo=function(e){var t=this;return(0,r.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.getReq("/api/v2/peerInfo/".concat(e)));case 1:case"end":return n.stop()}}),n)})))()},t.getSettings=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/settings"));case 1:case"end":return t.stop()}}),t)})))()},t.setSetting=function(e,t){var n=this;return(0,r.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n.putReq("/api/v2/settings/".concat(e),{settingValue:t}));case 1:case"end":return r.stop()}}),r)})))()},t.getEntryNodes=function(){var e=this;return(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getReq("/api/v2/node/entryNodes"));case 1:case"end":return t.stop()}}),t)})))()},e}(),he=function(e){var t=(0,f.useRef)(new de(e.apiEndpoint,e.apiToken));return(0,f.useEffect)((function(){t.current=new de(e.apiEndpoint,e.apiToken)}),[e.apiEndpoint,e.apiToken]),{apiRef:t}},ve=n(2891),ge=function(e,t,n){var r=(0,f.useState)(),a=r[0],s=r[1],i=(0,f.useState)({status:"DISCONNECTED"}),c=i[0],o=i[1],u=(0,f.useRef)(),p=(0,ve.debounce)((function(e){"CONNECTED"!==c.status&&s(e)}),5e3),l=function(){console.info("WS CONNECTED"),o((function(e){return e.status="CONNECTED",e}))},d=function(){console.info("WS DISCONNECTED"),o((function(e){return e.status="DISCONNECTED",e})),p(+new Date)},h=function(e){console.error("WS ERROR",e),o((function(t){return t.status="DISCONNECTED",t.error=String(e),t})),p(+new Date)};return(0,f.useEffect)((function(){u.current&&(console.info("WS Disconnecting.."),u.current.close(1e3,"Shutting down"));var r=new URL(t,e.apiEndpoint);return r.protocol="https:"===r.protocol?"wss":"ws",e.apiToken&&(r.search="?apiToken=".concat(encodeURIComponent(e.apiToken))),console.info("WS Connecting.."),u.current=new WebSocket(r),u.current.addEventListener("open",l),u.current.addEventListener("close",d),u.current.addEventListener("error",h),u.current.addEventListener("message",n),function(){u.current&&(u.current.removeEventListener("open",l),u.current.removeEventListener("close",d),u.current.removeEventListener("error",h),u.current.removeEventListener("message",n))}}),[e.apiEndpoint,e.apiToken,a]),{state:c,socketRef:u}},me=function(e){var t=function(e){var t=new URLSearchParams(e.search);return{apiEndpoint:t.get("apiEndpoint")||void 0,apiToken:t.get("apiToken")||void 0}}(location),n=le.Z.get("X-Auth-Token"),r=(0,f.useState)({config:{apiEndpoint:t.apiEndpoint||"http://localhost:3001/",apiToken:t.apiToken||n||void 0},aliases:{}}),a=r[0],s=r[1];return{state:a,api:he(a.config),streamWS:ge(a.config,"/api/v2/node/stream/websocket",(function(t){var n=function(e){if(void 0!==e.data)try{var t=JSON.parse(e.data);if("message"===t.type)return;if("connected"===t.type)return;if(!t.msg)return;return _(t.msg,+new Date(t.ts))}catch(n){console.log("error reading stream log",n)}}(t);n&&e(n)})),updateConfig:function(e){s((function(t){return t.config=e(t.config),t}))},updateAliases:function(e){s((function(t){return t.aliases=e(t.aliases),t}))}}},xe=d()((function(){return Promise.all([n.e(286),n.e(75)]).then(n.bind(n,6075))}),{loadableGenerated:{webpack:function(){return[6075]}},ssr:!1}),be="0c53ce1dd";function ke(){var e=(0,f.useState)([]),t=e[0],n=e[1],o=function(e){n((function(t){var n=(0,c.Z)(t);return n.push(e),n}))},l=me(o),d=new fe(l.api.apiRef.current,{getCachedAliases:function(){return l.state.aliases},updateAliasCache:function(e){return l.updateAliases(e)},getSymbols:function(){var e="xDAI",t="mHOPR";return{native:e,hopr:t,nativeDisplay:"NATIVE (".concat(e,")"),hoprDisplay:"HOPR (".concat(t,")")}}}),h=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=l.api.apiRef.current)||"CONNECTED"!==l.streamWS.state.status){e.next=19;break}return e.prev=2,e.next=5,t.getAliases();case 5:if(!(n=e.sent).ok){e.next=13;break}return e.next=9,n.json();case 9:r=e.sent,l.updateAliases((function(){return r})),e.next=14;break;case 13:console.error("failed to get aliases with HTTP status: ".concat(n.status));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){h();var e=setInterval(h,5e3);return function(){return clearInterval(e)}}),[l.api.apiRef.current,"CONNECTED"===l.streamWS.state.status]);var g=(0,f.useState)(!1),m=g[0],b=g[1],k=(0,f.useState)([]),w=k[0],y=k[1];(0,f.useEffect)((function(){var e=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=l.api.apiRef.current,e.next=4,t.getPeers();case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:r=e.sent,y(r.connected.map((function(e){return e.peerId}))),e.next=13;break;case 12:console.error("failed to get peers with HTTP status: ".concat(n.status));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();m&&e()}),[m]);var Z=(0,f.useState)(!1),C=Z[0],S=Z[1],A=(0,f.useState)(l.state.config),E=A[0],N=A[1],O=function(e){return function(t){N((0,i.Z)((0,s.Z)({},E),(0,a.Z)({},e,t.target.value)))}},P=(0,f.useState)(""),T=P[0],I=P[1],D=(0,f.useState)({history:[],index:0}),H=D[0],U=D[1];return(0,p.jsxs)("div",{className:R().container,children:[(0,p.jsx)(v(),{children:(0,p.jsx)("title",{children:"HOPR Admin"})}),(0,p.jsx)(x,{onClick:function(){return b(!m)}}),(0,p.jsxs)("h1",{children:["HOPR Logs - ",be," ",(0,p.jsx)("span",{className:R().cogwheelIcon,onClick:function(){return S(!C)},children:"\u2699\ufe0f"})]}),(0,p.jsx)(j,{messages:t,isConnected:"CONNECTED"===l.streamWS.state.status}),(0,p.jsx)("div",{className:"send",children:(0,p.jsx)("input",{id:"command",type:"text",autoFocus:!0,placeholder:"type 'help' for full list of commands",value:T,onChange:function(e){I(e.target.value)},onKeyDown:function(e){if("Enter"===e.key)e.stopPropagation(),d.execute((function(e){return o(_(e))}),T),U((function(e){if(!T)return e;var t=e.history.slice(0);return t.unshift(T),{history:t.slice(0,50),index:0}})),I("");else if("ArrowDown"===e.key){if(H.index>0){var t=--H.index;I(0===t?"":H.history[H.index]),U((function(e){return(0,i.Z)((0,s.Z)({},e),{index:t})}))}}else if("ArrowUp"===e.key&&H.index<H.history.length){var n=++H.index,r=H.history[H.index-1];I(r),U((function(e){return(0,i.Z)((0,s.Z)({},e),{index:n})}))}}})}),m&&(0,p.jsxs)("div",{className:R().popup,children:[(0,p.jsxs)("h2",{children:["Connected Peers (",w.length,")"]}),(0,p.jsx)("div",{className:R().connectedPeersList,children:w.map((function(e){return(0,p.jsxs)("div",{className:R().peer,children:[(0,p.jsx)(xe,{diameter:40,address:e,className:R().peerIcon}),(0,p.jsx)("div",{children:e})]},e)}))})]}),C&&(0,p.jsxs)("div",{className:R().popup,children:[(0,p.jsx)("h2",{children:"Configuration"}),(0,p.jsxs)("div",{className:R().configuration,children:[(0,p.jsxs)("div",{children:["API endpoint: ",(0,p.jsx)("input",{value:E.apiEndpoint,onChange:O("apiEndpoint")})]}),(0,p.jsxs)("div",{children:["API token: ",(0,p.jsx)("input",{value:E.apiToken||"",onChange:O("apiToken")})]}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:function(){l.updateConfig((function(e){return(0,s.Z)({},e,E)})),S(!1)},children:"Save"})})]})]})]})}},7179:function(e){e.exports={popup:"Home_popup__Q7Sx2",peer:"Home_peer__RJjjp",peerIcon:"Home_peerIcon__cFgM4",cogwheelIcon:"Home_cogwheelIcon__0jxP_",configuration:"Home_configuration__1kda4"}},2804:function(e){e.exports={logs:"log_logs__4mQJL",connecting:"log_connecting__tnQlr",logline:"log_logline___1YWf",loglineicons:"log_loglineicons__iteK6",logId:"log_logId__C3iNd"}},8789:function(e){e.exports={logo:"logo_logo__oc5MR"}},7444:function(){},1164:function(){}},function(e){e.O(0,[932,727,774,888,179],(function(){return t=4878,e(e.s=t);var t}));var t=e.O();_N_E=t}]);